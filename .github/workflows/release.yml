name: Notify Discord on New Release

on:
  release:
    types: [published] # Runs when a release is published

jobs:
  guidelines-update-alert-discord:
    runs-on: ubuntu-latest
    steps:
      - name: Send Custom Discord Notification (No Title Link)
        # ðŸ’¡ SWITCHING TO A MORE FLEXIBLE ACTION ðŸ’¡
        uses: tsick/discord-webhook-action@v2
        with:
          # Use the secret you created
          webhook_url: ${{ secrets.DISCORD_WEBHOOK }}
          
          # 1. Title without link: This action allows you to set the 
          # title and link (url) separately.
          embed_title: "Guidelines got updated."
          # OMITTING the 'embed_url' parameter ensures the title is plain text!
          
          # 2. Content/Body: This is the main release description
          content: "${{ github.event.release.body }}" 
          
          # 3. Timestamp: Uses the same reliable variable for the publication time
          embed_timestamp: ${{ github.event.release.published_at }}
          
          # 4. Appearance: Set the username and color for the webhook
          username: "Guidelines"
          color: "2105893" 
          
          # OPTIONAL: You can include the author who created the release
          embed_footer_text: "Released by ${{ github.event.release.author.login }}"
